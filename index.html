<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tracking Money — Cristian & Maharani</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #f5f6fa;
      --primary: #4a90e2;
      --success: #2ecc71;
      --danger: #e74c3c;
      --dark: #2c3e50;
      --radius: 16px;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      margin: 0;
      padding: 0;
      color: var(--dark);
    }

    header {
      background: var(--primary);
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 1.4rem;
      font-weight: 600;
    }

    main {
      padding: 1rem;
      display: grid;
      gap: 1rem;
    }

    .card {
      background: white;
      border-radius: var(--radius);
      padding: 1rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .flex {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    input, select, button {
      font-family: inherit;
      font-size: 1rem;
      padding: 0.5rem;
      border-radius: var(--radius);
      border: 1px solid #ccc;
    }

    button {
      background: var(--primary);
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      opacity: 0.9;
    }

    .green { color: var(--success); }
    .red { color: var(--danger); }
  </style>
</head>

<body>
  <header>Tracking Money — Cristian & Maharani</header>

  <main>
    <div class="card">
      <h3>Input Transaksi</h3>
      <div class="flex">
        <select id="nama">
          <option value="Cristian">Cristian</option>
          <option value="Maharani">Maharani</option>
        </select>
        <select id="jenis">
          <option value="pemasukan">Pemasukan</option>
          <option value="pengeluaran">Pengeluaran</option>
          <option value="tabungan">Tabungan</option>
        </select>
        <input type="number" id="jumlah" placeholder="Jumlah (Rp)" />
        <button onclick="tambahData()">Tambah</button>
      </div>
    </div>

    <div class="card">
      <h3>Ringkasan</h3>
      <p>Cristian — Pemasukan: <span id="pemasukanCristian">0</span> | Tabungan: <span id="tabunganCristian">0</span> | Sisa: <span id="sisaCristian">0</span></p>
      <p>Maharani — Pemasukan: <span id="pemasukanMaharani">0</span> | Tabungan: <span id="tabunganMaharani">0</span> | Sisa: <span id="sisaMaharani">0</span></p>
    </div>

    <div class="card">
      <h3>Riwayat</h3>
      <ul id="riwayat"></ul>
    </div>
  </main>

  <script>
    // ====== Inisialisasi Data ======
    let data = JSON.parse(localStorage.getItem("data")) || [];
    let tabunganTetap = JSON.parse(localStorage.getItem("tabunganTetap")) || {
      Cristian: 0,
      Maharani: 0
    };

    // ====== Fungsi Tambah Data ======
    function tambahData() {
      const nama = document.getElementById("nama").value;
      const jenis = document.getElementById("jenis").value;
      const jumlah = parseInt(document.getElementById("jumlah").value || 0);

      if (!jumlah || jumlah <= 0) {
        alert("Masukkan jumlah yang valid");
        return;
      }

      const transaksi = { nama, jenis, jumlah, waktu: new Date().toLocaleString() };
      data.push(transaksi);
      localStorage.setItem("data", JSON.stringify(data));

      // Jika jenis tabungan → kurangi pemasukan
      if (jenis === "tabungan") {
        tabunganTetap[nama] += jumlah;
        localStorage.setItem("tabunganTetap", JSON.stringify(tabunganTetap));
      }

      document.getElementById("jumlah").value = "";
      updateUI();
    }

    // ====== Fungsi Update UI ======
    function updateUI() {
      let pemasukan = { Cristian: 0, Maharani: 0 };
      let pengeluaran = { Cristian: 0, Maharani: 0 };

      data.forEach(item => {
        if (item.jenis === "pemasukan") pemasukan[item.nama] += item.jumlah;
        else if (item.jenis === "pengeluaran") pengeluaran[item.nama] += item.jumlah;
      });

      // Hitung sisa
      const sisaCristian = pemasukan.Cristian - pengeluaran.Cristian - tabunganTetap.Cristian;
      const sisaMaharani = pemasukan.Maharani - pengeluaran.Maharani - tabunganTetap.Maharani;

      // Update tampilan
      document.getElementById("pemasukanCristian").textContent = pemasukan.Cristian.toLocaleString();
      document.getElementById("pemasukanMaharani").textContent = pemasukan.Maharani.toLocaleString();
      document.getElementById("tabunganCristian").textContent = tabunganTetap.Cristian.toLocaleString();
      document.getElementById("tabunganMaharani").textContent = tabunganTetap.Maharani.toLocaleString();
      document.getElementById("sisaCristian").textContent = sisaCristian.toLocaleString();
      document.getElementById("sisaMaharani").textContent = sisaMaharani.toLocaleString();

      // Update riwayat
      const list = document.getElementById("riwayat");
      list.innerHTML = "";
      data.slice().reverse().forEach(item => {
        const li = document.createElement("li");
        li.textContent = `${item.waktu} — ${item.nama} ${item.jenis} Rp${item.jumlah.toLocaleString()}`;
        li.className = item.jenis === "pemasukan" ? "green" :
                       item.jenis === "pengeluaran" ? "red" : "";
        list.appendChild(li);
      });
    }

    // ====== Jalankan Saat Awal ======
    updateUI();
  </script>
</body>
</html>
